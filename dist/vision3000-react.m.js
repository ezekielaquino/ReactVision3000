import e from"react";var n=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;var o=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},t=0;t<10;t++)n["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(n).map(function(e){return n[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var i,a,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var u in i=Object(arguments[c]))t.call(i,u)&&(s[u]=i[u]);if(n){a=n(i);for(var f=0;f<a.length;f++)r.call(i,a[f])&&(s[a[f]]=i[a[f]])}}return s},i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",a=function(){};if("production"!==process.env.NODE_ENV){var s=i,c={};a=function(e){var n="Warning: "+e;"undefined"!=typeof console&&console.error(n);try{throw new Error(n)}catch(e){}}}var u=function(e,n,t,r,o){if("production"!==process.env.NODE_ENV)for(var i in e)if(e.hasOwnProperty(i)){var u;try{if("function"!=typeof e[i]){var f=Error((r||"React class")+": "+t+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.");throw f.name="Invariant Violation",f}u=e[i](n,i,r,t,null,s)}catch(e){u=e}if(!u||u instanceof Error||a((r||"React class")+": type specification of "+t+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof u+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),u instanceof Error&&!(u.message in c)){c[u.message]=!0;var l=o?o():"";a("Failed "+t+" type: "+u.message+(null!=l?l:""))}}},f=function(){};function l(){return null}"production"!==process.env.NODE_ENV&&(f=function(e){var n="Warning: "+e;"undefined"!=typeof console&&console.error(n);try{throw new Error(n)}catch(e){}});var p=function(e,n){var t="function"==typeof Symbol&&Symbol.iterator,r="@@iterator";var a="<<anonymous>>",s={array:y("array"),bool:y("boolean"),func:y("function"),number:y("number"),object:y("object"),string:y("string"),symbol:y("symbol"),any:d(l),arrayOf:function(e){return d(function(n,t,r,o,a){if("function"!=typeof e)return new p("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=n[t];if(!Array.isArray(s)){var c=h(s);return new p("Invalid "+o+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected an array.")}for(var u=0;u<s.length;u++){var f=e(s,u,r,o,a+"["+u+"]",i);if(f instanceof Error)return f}return null})},element:function(){return d(function(n,t,r,o,i){var a=n[t];if(!e(a)){var s=h(a);return new p("Invalid "+o+" `"+i+"` of type `"+s+"` supplied to `"+r+"`, expected a single ReactElement.")}return null})}(),instanceOf:function(e){return d(function(n,t,r,o,i){if(!(n[t]instanceof e)){var s=e.name||a,c=function(e){if(!e.constructor||!e.constructor.name)return a;return e.constructor.name}(n[t]);return new p("Invalid "+o+" `"+i+"` of type `"+c+"` supplied to `"+r+"`, expected instance of `"+s+"`.")}return null})},node:function(){return d(function(e,n,t,r,o){if(!v(e[n]))return new p("Invalid "+r+" `"+o+"` supplied to `"+t+"`, expected a ReactNode.");return null})}(),objectOf:function(e){return d(function(n,t,r,o,a){if("function"!=typeof e)return new p("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=n[t],c=h(s);if("object"!==c)return new p("Invalid "+o+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected an object.");for(var u in s)if(s.hasOwnProperty(u)){var f=e(s,u,r,o,a+"."+u,i);if(f instanceof Error)return f}return null})},oneOf:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&f("Invalid argument supplied to oneOf, expected an instance of array."),l;return d(function(n,t,r,o,i){for(var a=n[t],s=0;s<e.length;s++)if(c(a,e[s]))return null;var u=JSON.stringify(e);return new p("Invalid "+o+" `"+i+"` of value `"+a+"` supplied to `"+r+"`, expected one of "+u+".")})},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&f("Invalid argument supplied to oneOfType, expected an instance of array."),l;for(var n=0;n<e.length;n++){var t=e[n];if("function"!=typeof t)return f("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+b(t)+" at index "+n+"."),l}return d(function(n,t,r,o,a){for(var s=0;s<e.length;s++){var c=e[s];if(null==c(n,t,r,o,a,i))return null}return new p("Invalid "+o+" `"+a+"` supplied to `"+r+"`.")})},shape:function(e){return d(function(n,t,r,o,a){var s=n[t],c=h(s);if("object"!==c)return new p("Invalid "+o+" `"+a+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");for(var u in e){var f=e[u];if(f){var l=f(s,u,r,o,a+"."+u,i);if(l)return l}}return null})},exact:function(e){return d(function(n,t,r,a,s){var c=n[t],u=h(c);if("object"!==u)return new p("Invalid "+a+" `"+s+"` of type `"+u+"` supplied to `"+r+"`, expected `object`.");var f=o({},n[t],e);for(var l in f){var d=e[l];if(!d)return new p("Invalid "+a+" `"+s+"` key `"+l+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(n[t],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var y=d(c,l,r,a,s+"."+l,i);if(y)return y}return null})}};function c(e,n){return e===n?0!==e||1/e==1/n:e!=e&&n!=n}function p(e){this.message=e,this.stack=""}function d(e){if("production"!==process.env.NODE_ENV)var t={},r=0;function o(o,s,c,u,l,d,y){if(u=u||a,d=d||c,y!==i){if(n){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}if("production"!==process.env.NODE_ENV&&"undefined"!=typeof console){var h=u+":"+c;!t[h]&&r<3&&(f("You are manually calling a React.PropTypes validation function for the `"+d+"` prop on `"+u+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),t[h]=!0,r++)}}return null==s[c]?o?new p(null===s[c]?"The "+l+" `"+d+"` is marked as required in `"+u+"`, but its value is `null`.":"The "+l+" `"+d+"` is marked as required in `"+u+"`, but its value is `undefined`."):null:e(s,c,u,l,d)}var s=o.bind(null,!1);return s.isRequired=o.bind(null,!0),s}function y(e){return d(function(n,t,r,o,i,a){var s=n[t];return h(s)!==e?new p("Invalid "+o+" `"+i+"` of type `"+m(s)+"` supplied to `"+r+"`, expected `"+e+"`."):null})}function v(n){switch(typeof n){case"number":case"string":case"undefined":return!0;case"boolean":return!n;case"object":if(Array.isArray(n))return n.every(v);if(null===n||e(n))return!0;var o=function(e){var n=e&&(t&&e[t]||e[r]);if("function"==typeof n)return n}(n);if(!o)return!1;var i,a=o.call(n);if(o!==n.entries){for(;!(i=a.next()).done;)if(!v(i.value))return!1}else for(;!(i=a.next()).done;){var s=i.value;if(s&&!v(s[1]))return!1}return!0;default:return!1}}function h(e){var n=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,n){return"symbol"===e||"Symbol"===n["@@toStringTag"]||"function"==typeof Symbol&&n instanceof Symbol}(n,e)?"symbol":n}function m(e){if(null==e)return""+e;var n=h(e);if("object"===n){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return n}function b(e){var n=m(e);switch(n){case"array":case"object":return"an "+n;case"boolean":case"date":case"regexp":return"a "+n;default:return n}}return p.prototype=Error.prototype,s.checkPropTypes=u,s.PropTypes=s,s};function d(){}var y,v=(function(e){if("production"!==process.env.NODE_ENV){var n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=p(function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},!0)}else e.exports=function(){function e(e,n,t,r,o,a){if(a!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function n(){return e}e.isRequired=e;var t={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n};return t.checkPropTypes=d,t.PropTypes=t,t}()}(y={exports:{}},y.exports),y.exports),h=function(e){void 0===e&&(e={}),this.options={rootMargin:e.rootMargin||"0px 0px",threshold:e.threshold||[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]},this.onIntersect=e.onIntersect,this.FPS=2,this.init()};h.prototype.init=function(){var e=this;window.VISION3K={observer:new IntersectionObserver(function(n){e.intersect(n)},this.options),observe:this.observe,onIntersect:this.onIntersect,observables:[],inView:[],viewed:[],errors:[]},this.scrollIntent()},h.prototype.intersect=function(e){e.forEach(function(e){var n=e.target.observeId;window.VISION3K.inView=window.VISION3K.inView.filter(function(e){return e!==n}),e.isIntersecting&&window.VISION3K.inView.push(n)});var n=window.VISION3K.onIntersect||this.onIntersect;"function"==typeof n&&n(window.VISION3K.inView,window.VISION3K.viewed)},h.prototype.loadImages=function(){window.VISION3K.inView.forEach(function(e){if(!window.VISION3K.viewed.includes(e)){var n=window.VISION3K.observables[e],t=n.querySelector("img");window.VISION3K.viewed.push(e),"function"==typeof n.onLoadStart&&n.onLoadStart(n,t,window.VISION3K.viewed),function(e){var n=new Image;return new Promise(function(t,r){n.src=e,n.onload=t(n),n.onerror=r})}(t.dataset.src).then(function(e){e.classList=t.classList,e.decode().then(function(){t.replaceWith(e),"function"==typeof n.onLoad&&n.onLoad(n,t,window.VISION3K.viewed)})}).catch(function(e){console.error("Failed to load image "+t.dataset.src)})}})},h.prototype.scrollIntent=function(){var e=this;this.scrollProps={scrollSpeed:0,isHalted:!0,prevScrollSpeed:0,prevY:0};var n=function(){clearTimeout(e.timeout),e.timeout=setTimeout(function(){var t=Math.abs(window.scrollY-e.scrollProps.prevY),r=0===t;e.scrollProps={scrollSpeed:t,isHalted:r,prevY:window.scrollY,prevScrollSpeed:e.scrollProps.scrollSpeed},r&&e.loadImages(),n()},1e3/e.FPS)};n()},h.prototype.observe=function(e,n){window.VISION3K.observables.push(e),e.observeId=window.VISION3K.observables.length-1,e.onLoadStart=n.onLoadStart,e.onLoad=n.onLoad,window.VISION3K.observer.observe(e)};var m=function(e){return new h(e)},b={src:v.string.isRequired,alt:v.string,classNames:v.object,containerStyle:v.object,imageStyle:v.object,placeholder:v.string,onIntersect:v.func,onLoad:v.func,onLoadStart:v.func},w=function(n){function t(){n.call(this),this.state={documentLoaded:!1,status:""},this.onLoadStart=this.onLoadStart.bind(this),this.onLoad=this.onLoad.bind(this)}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t,t.prototype.shouldComponentUpdate=function(e,n){return n.documentLoaded!==this.state.documentLoaded||n.status!==this.state.status},t.prototype.componentDidMount=function(){var e=this;window.VISION3K.onIntersect=this.props.onIntersect,this.setState({documentLoaded:!0},function(){window.VISION3K.observe(e.elem,{onLoadStart:function(n,t,r){return e.onLoadStart(n,t,r)},onLoad:function(n,t,r){return e.onLoad(n,t,r)}})})},t.prototype.onLoadStart=function(e,n,t){var r=this;"loaded"!==this.state.status&&this.setState({status:"loading"},function(){r.props.onLoadStart&&r.props.onLoadStart(e,n,t)})},t.prototype.onLoad=function(e,n,t){var r=this;"loaded"!==this.state.status&&this.setState({status:"loaded"},function(){r.props.onLoad&&r.props.onLoad(e,n,t)})},t.prototype.render=function(){var n=this,t=this.state.status,r=this.props,o=r.alt;void 0===o&&(o="Image");var i=r.classNames;void 0===i&&(i={});var a=r.containerStyle;void 0===a&&(a={});var s=r.imageStyle;void 0===s&&(s={});var c=r.src,u=r.placeholder,f={container:a.base,image:s.base},l="loading"===t?{container:a.loading,image:s.loading}:{container:a.loaded,image:s.loaded},p="loading"===t?{container:i.containerLoading,image:i.imageLoading}:{container:i.containerLoaded,image:i.imageLoaded};return e.createElement("figure",{ref:function(e){return n.elem=e},style:Object.assign({},f.container,l.container),className:g([i.containerBase,t&&p.container])},e.createElement("img",{"data-src":c,src:u,style:Object.assign({},f.image,l.image),alt:o,className:g([i.imageBase,t&&p.image])}))},t}(e.Component);w.propTypes=b;var g=function(e){return e.filter(Boolean).join(" ")};export default w;export{m as initVision3000};
//# sourceMappingURL=vision3000-react.m.js.map
